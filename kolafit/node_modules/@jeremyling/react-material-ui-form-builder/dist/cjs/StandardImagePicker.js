"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./jsx-runtime-1efc2582.js"),t=require("lodash/get"),i=require("react"),n=require("react-hook-form"),r=require("@mui/material"),o=require("@mui/material/styles"),l=require("./ErrorText-af871538.js"),u=require("./Title-2c571786.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=s(t),d=function(){return d=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)},c=function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};function p(){return{width:window.innerWidth,height:window.innerHeight}}var f=function(){return f=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f.apply(this,arguments)},x=function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},v=o.styled("div")((function(){return{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",cursor:"pointer"}})),m=o.styled(r.ImageList)((function(){return{width:"100%",marginBottom:"2px !important",transform:"translateZ(0)"}})),g=o.styled("div")((function(){return{display:"inline-block",position:"relative",margin:"2px",width:"100%"}})),y=o.styled("div")((function(e){var t,i,n=e.fieldConfig;return{marginTop:"".concat(Number((null===(t=n.aspectRatio)||void 0===t?void 0:t[1])||1)/Number((null===(i=n.aspectRatio)||void 0===i?void 0:i[0])||1)*100,"%")}})),b=o.styled(r.Box)((function(){return{position:"absolute",inset:0}})),h=o.styled("img")((function(){return{borderRadius:"4px",objectFit:"contain",width:"100%",height:"100%",pointerEvents:"none"}})),j=o.styled("div")((function(e){var t=e.fieldConfig;return{margin:"4px",overflow:"hidden",height:(t.labelLines||2)*(L(t)+2)}})),w=o.styled(r.Typography)((function(e){var t=e.fieldConfig;return{display:"-webkit-box",boxOrient:"vertical",lineClamp:t.labelLines,lineHeight:"".concat(L(t)+2,"px"),textAlign:"center"}})),C=o.styled("div")((function(e){var t=e.fieldConfig;return{margin:"4px",overflow:"hidden",height:(t.subLabelLines||2)*(O(t)+2)}})),R=o.styled(r.Typography)((function(e){var t=e.fieldConfig;return{display:"-webkit-box",boxOrient:"vertical",lineClamp:t.subLabelLines||2,lineHeight:"".concat(O(t)+2,"px"),textAlign:"center"}})),L=function(e){var t,i,n,r;return(null===(i=null===(t=e.labelProps)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fontSize)?Number(String(null===(r=null===(n=e.labelProps)||void 0===n?void 0:n.style)||void 0===r?void 0:r.fontSize).replace("px","")):14},O=function(e){var t,i,n,r;return(null===(i=null===(t=e.subLabelProps)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fontSize)?Number(String(null===(r=null===(n=e.subLabelProps)||void 0===n?void 0:n.style)||void 0===r?void 0:r.fontSize).replace("px","")):14};exports.default=function(t){var s=t.field,L=t.methods,O=L.control;L.getValues;var T=L.setValue;L.trigger;var P=L.formState.errors,k=t.hideTitle,A=o.useTheme(),q=function(){var e=o.useTheme(),t=c([],e.breakpoints.keys,!0),n=i.useState(p()),l=n[0],u=n[1];i.useEffect((function(){function e(){u(p())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var s=t.reduce((function(t,i){var n=e.breakpoints.up(i);return r.useMediaQuery(n)?i:t}),"xs");return d({widthType:s},l)}().widthType,S=i.useMemo((function(){return s.getValueKey?s.getValueKey:function(e){return(null==e?void 0:e.label)||(null==e?void 0:e.src)}}),[s.getValueKey]),z=i.useMemo((function(){return s.getOptionKey?s.getOptionKey:function(e){return(null==e?void 0:e.label)||(null==e?void 0:e.src)}}),[s.getOptionKey]),E=function(e,t){if(s.multiple&&Array.isArray(t)){var i=null==t?void 0:t.findIndex((function(t){return S(t)===z(e)}));if(i>=0){var n=x([],t,!0);return n.splice(i,1),0===n.length&&(n=void 0),void T(s.attribute,n)}T(s.attribute,x(x([],t||[],!0),[e],!1))}else{if(S(t)===z(e))return void T(s.attribute,void 0);T(s.attribute,e)}},K=function(e,t,i){return e.multiple&&Array.isArray(i)?(null==i?void 0:i.findIndex((function(e){return S(e)===z(t)})))>=0:S(i)===z(t)},B=function(e){return e.groupContainerProps};return e.jsxRuntime.exports.jsx(n.Controller,{name:s.attribute,control:O,render:function(t){var n,o,d,c,p=t.field;return e.jsxRuntime.exports.jsxs(i.Fragment,{children:[!k&&s.title&&e.jsxRuntime.exports.jsx(u.Title,{field:s}),e.jsxRuntime.exports.jsx(v,{children:e.jsxRuntime.exports.jsx(m,f({},B(s),{cols:(d=s.imageCols,c=f({},d||{xs:2}),c.sm=(null==d?void 0:d.sm)||c.xs,c.md=(null==d?void 0:d.md)||c.sm,c.lg=(null==d?void 0:d.lg)||c.md,c.xl=(null==d?void 0:d.xl)||c.lg,c)[q],rowHeight:"auto"},{children:null===(n=s.images)||void 0===n?void 0:n.map((function(t,i){return e.jsxRuntime.exports.jsxs(r.ButtonBase,f({},function(e,t,i){var n;return f(f({id:e.id||e.attribute,sx:{width:"calc(100% - ".concat(K(e,t,i)?"12px":"8px",")"),margin:"2px",border:K(e,t,i)?"2px solid ".concat(A.palette.primary.main):void 0,borderRadius:"4px",flexDirection:"column"}},e.props),{component:"div",onClick:(null===(n=e.props)||void 0===n?void 0:n.onClick)?e.props.onClick(t,i):function(){return E(t,i)}})}(s,t,p.value),{children:[e.jsxRuntime.exports.jsxs(g,{children:[e.jsxRuntime.exports.jsx(y,{fieldConfig:s}),e.jsxRuntime.exports.jsx(b,f({},s.imageProps,{children:t.customComponent?e.jsxRuntime.exports.jsx(r.Box,f({sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},{children:t.customComponent})):e.jsxRuntime.exports.jsx(h,{src:t.src,alt:t.alt||t.label,title:t.label||t.alt,loading:"lazy"})}))]}),t.label&&e.jsxRuntime.exports.jsx(j,f({fieldConfig:s},{children:e.jsxRuntime.exports.jsx(w,f({fieldConfig:s},s.labelProps,{children:t.label}))})),t.subLabel&&e.jsxRuntime.exports.jsx(C,f({fieldConfig:s},{children:e.jsxRuntime.exports.jsx(R,f({fieldConfig:s},s.subLabelProps,{children:t.subLabel}))}))]}),i)}))}))}),!!a.default(P,s.attribute)&&e.jsxRuntime.exports.jsx(l.ErrorText,{error:null===(o=a.default(P,s.attribute))||void 0===o?void 0:o.message})]})}})};
