import{j as e}from"./jsx-runtime-53cdfd8f.js";import t from"lodash/get";import{useState as r,useEffect as i,useMemo as n,Fragment as o}from"react";import{Controller as l}from"react-hook-form";import{useMediaQuery as a,ButtonBase as u,Box as s,ImageList as d,Typography as c}from"@mui/material";import{useTheme as p,styled as f}from"@mui/material/styles";import{E as v}from"./ErrorText-a1dab7b9.js";import{T as x}from"./Title-61b3472c.js";var m=function(){return m=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},m.apply(this,arguments)},g=function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};function b(){return{width:window.innerWidth,height:window.innerHeight}}var h=function(){return h=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},h.apply(this,arguments)},y=function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},j=f("div")((function(){return{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",cursor:"pointer"}})),w=f(d)((function(){return{width:"100%",marginBottom:"2px !important",transform:"translateZ(0)"}})),C=f("div")((function(){return{display:"inline-block",position:"relative",margin:"2px",width:"100%"}})),L=f("div")((function(e){var t,r,i=e.fieldConfig;return{marginTop:"".concat(Number((null===(t=i.aspectRatio)||void 0===t?void 0:t[1])||1)/Number((null===(r=i.aspectRatio)||void 0===r?void 0:r[0])||1)*100,"%")}})),O=f(s)((function(){return{position:"absolute",inset:0}})),k=f("img")((function(){return{borderRadius:"4px",objectFit:"contain",width:"100%",height:"100%",pointerEvents:"none"}})),A=f("div")((function(e){var t=e.fieldConfig;return{margin:"4px",overflow:"hidden",height:(t.labelLines||2)*(T(t)+2)}})),P=f(c)((function(e){var t=e.fieldConfig;return{display:"-webkit-box",boxOrient:"vertical",lineClamp:t.labelLines,lineHeight:"".concat(T(t)+2,"px"),textAlign:"center"}})),z=f("div")((function(e){var t=e.fieldConfig;return{margin:"4px",overflow:"hidden",height:(t.subLabelLines||2)*(K(t)+2)}})),S=f(c)((function(e){var t=e.fieldConfig;return{display:"-webkit-box",boxOrient:"vertical",lineClamp:t.subLabelLines||2,lineHeight:"".concat(K(t)+2,"px"),textAlign:"center"}})),T=function(e){var t,r,i,n;return(null===(r=null===(t=e.labelProps)||void 0===t?void 0:t.style)||void 0===r?void 0:r.fontSize)?Number(String(null===(n=null===(i=e.labelProps)||void 0===i?void 0:i.style)||void 0===n?void 0:n.fontSize).replace("px","")):14},K=function(e){var t,r,i,n;return(null===(r=null===(t=e.subLabelProps)||void 0===t?void 0:t.style)||void 0===r?void 0:r.fontSize)?Number(String(null===(n=null===(i=e.subLabelProps)||void 0===i?void 0:i.style)||void 0===n?void 0:n.fontSize).replace("px","")):14};function E(d){var c=d.field,f=d.methods,T=f.control;f.getValues;var K=f.setValue;f.trigger;var E=f.formState.errors,V=d.hideTitle,H=p(),N=function(){var e=p(),t=g([],e.breakpoints.keys,!0),n=r(b()),o=n[0],l=n[1];i((function(){function e(){l(b())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var u=t.reduce((function(t,r){var i=e.breakpoints.up(r);return a(i)?r:t}),"xs");return m({widthType:u},o)}().widthType,R=n((function(){return c.getValueKey?c.getValueKey:function(e){return(null==e?void 0:e.label)||(null==e?void 0:e.src)}}),[c.getValueKey]),I=n((function(){return c.getOptionKey?c.getOptionKey:function(e){return(null==e?void 0:e.label)||(null==e?void 0:e.src)}}),[c.getOptionKey]),W=function(e,t){if(c.multiple&&Array.isArray(t)){var r=null==t?void 0:t.findIndex((function(t){return R(t)===I(e)}));if(r>=0){var i=y([],t,!0);return i.splice(r,1),0===i.length&&(i=void 0),void K(c.attribute,i)}K(c.attribute,y(y([],t||[],!0),[e],!1))}else{if(R(t)===I(e))return void K(c.attribute,void 0);K(c.attribute,e)}},B=function(e,t,r){return e.multiple&&Array.isArray(r)?(null==r?void 0:r.findIndex((function(e){return R(e)===I(t)})))>=0:R(r)===I(t)},D=function(e){return e.groupContainerProps};return e.exports.jsx(l,{name:c.attribute,control:T,render:function(r){var i,n,l,a,d=r.field;return e.exports.jsxs(o,{children:[!V&&c.title&&e.exports.jsx(x,{field:c}),e.exports.jsx(j,{children:e.exports.jsx(w,h({},D(c),{cols:(l=c.imageCols,a=h({},l||{xs:2}),a.sm=(null==l?void 0:l.sm)||a.xs,a.md=(null==l?void 0:l.md)||a.sm,a.lg=(null==l?void 0:l.lg)||a.md,a.xl=(null==l?void 0:l.xl)||a.lg,a)[N],rowHeight:"auto"},{children:null===(i=c.images)||void 0===i?void 0:i.map((function(t,r){return e.exports.jsxs(u,h({},function(e,t,r){var i;return h(h({id:e.id||e.attribute,sx:{width:"calc(100% - ".concat(B(e,t,r)?"12px":"8px",")"),margin:"2px",border:B(e,t,r)?"2px solid ".concat(H.palette.primary.main):void 0,borderRadius:"4px",flexDirection:"column"}},e.props),{component:"div",onClick:(null===(i=e.props)||void 0===i?void 0:i.onClick)?e.props.onClick(t,r):function(){return W(t,r)}})}(c,t,d.value),{children:[e.exports.jsxs(C,{children:[e.exports.jsx(L,{fieldConfig:c}),e.exports.jsx(O,h({},c.imageProps,{children:t.customComponent?e.exports.jsx(s,h({sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},{children:t.customComponent})):e.exports.jsx(k,{src:t.src,alt:t.alt||t.label,title:t.label||t.alt,loading:"lazy"})}))]}),t.label&&e.exports.jsx(A,h({fieldConfig:c},{children:e.exports.jsx(P,h({fieldConfig:c},c.labelProps,{children:t.label}))})),t.subLabel&&e.exports.jsx(z,h({fieldConfig:c},{children:e.exports.jsx(S,h({fieldConfig:c},c.subLabelProps,{children:t.subLabel}))}))]}),r)}))}))}),!!t(E,c.attribute)&&e.exports.jsx(v,{error:null===(n=t(E,c.attribute))||void 0===n?void 0:n.message})]})}})}export{E as default};
